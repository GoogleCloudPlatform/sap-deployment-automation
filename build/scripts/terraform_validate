#! /bin/bash
#
# Copyright 2019 Google LLC. This software is provided as-is, without warranty
# or representation for any use or purpose. Your use of it is subject to your
# agreement with Google.
#

# The first and only argument to this script is the directory containing *.tf
# files to validate.  This directory is assumed to be a root module.

set -eu
curdir=$(pwd)
cd "${1}"
terraform init -backend=false >/dev/null
terraform validate
cd "$curdir"